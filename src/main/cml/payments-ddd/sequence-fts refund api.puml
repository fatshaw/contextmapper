@startuml

skinparam padding 5
skinparam roundcorner 20

skinparam monochrome true

autoactivate on

actor "merchant" as User
control "webapp/airboard" as FrontEnd
control "pagateway" as pagateway
participant "pacore" as pacore
participant "fts" as FTS
participant "clientwallet" as ClientWallet
activate User

alt refund
User -> pagateway++: refund
pagateway -> pacore++: refund
pacore -> FTS++: refund 
alt receivable is not enough
FTS -> ClientWallet: reserve
return reserve result
end
FTS -> DB: save ft for refund
return refund result
return refund result
return refund result
return refund result
end

deactivate User 

@enduml